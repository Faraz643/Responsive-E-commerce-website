let colorBlue = 'clr-45409C'
let colorGreen = 'clr-01AF67'

export var product = [
  {
    id: "1",
    name: "Nike Red Shoes",
    description: "lorem34",
    price: "95",
    image: "../Images/Shoes/nike-red-removebg-preview.png",
    background: "",
    department: "Men",
    category: "Shoes",
  },
  {
    id: "2",
    name: "Nike Black Shoes",
    description: "lorem34",
    price: "100",
    image: "../Images/Shoes/nike-black-removebg-preview.png",
    background: colorBlue,
    department: "Men",
    category: "Shoes",
    
  },
  {
    id: "3",
    name: "Nike White Shoes",
    description: "lorem34",
    price: "120",
    image: "../Images/Shoes/download.png",
    background: colorGreen,
    department: "Men",
    category: "Shoes",
  },
  {
    id: "4",
    name: "Rayban Sunglasses",
    description: "lorem34",
    price: "23",
    image:
      "../Images/Sunglasses/charlesdeluvio-1-nx1QR5dTE-unsplash-removebg-preview.png",
    background: colorBlue,
    department: "Men",
    category: "Glasses",
  },
  {
    id: "5",
    name: "Armani Black Shaded",
    description: "",
    price: "25",
    image:
      "../Images/Sunglasses/andres-hernandez-ouAyz-zRMTw-unsplash-removebg-preview.png",
    background: colorGreen,
    department: "Men",
    category: "Glasses",
  },
  {
    id: "6",
    name: "Blue Hoodie",
    description: "lorem34",
    price: "35",
    image:
      "../Images/Hoodies/499-4999188_hoodie-clipart-blue-hoodie-hd-png-download-removebg-preview.png",
    background: "",
    department: "Women",
    category: "Hoodie",
  },
  {
    id: "7",
    name: "Levi's Jacket",
    description: "lorem34",
    price: "50",
    image:
      "../Images/Jacket/tobias-tullius-Fg15LdqpWrs-unsplash-removebg-preview.png",
    background: "",
    department: "Men",
    category: "Jacket",
  },
  {
    id: "8",
    name: "levi's T-Shirt",
    description: "lorem34",
    price: "60",
    image:
      "../Images/shirts/santhosh-kumar-RqYTuWkTdEs-unsplash-removebg-preview.png",
    background: colorBlue,
    department: "Women",
    category: "T-Shirt",
  },
  {
    id: "9",
    name: "Men's Combo",
    description: "lorem34",
    price: "52",
    image: "../Images/shirts/image-removebg-preview.png",
    background: colorGreen,
    department: "Men",
    category: "Men",
  },
  {
    id: "10",
    name: "Hat",
    description: "",
    price: "7",
    image:
      "../Images/Hat/bucket-hat-mockup-removebg-preview.png",
    background: "clr-01AF67",
    department: "Women",
    category: "Hats",
  },
  {
    id: "11",
    name: "Red Hoodie",
    description: "",
    price: "40",
    image:
      "../Images/Hoodies/Long-Sleeve-Hoodie.png",
    background: "",
    department: "Men",
    category: "Hoodie",
  },

  {
    id: "12",
    name: "Denim Jacket",
    description: "",
    price: "50",
    image:
      "../Images/Jacket/denim-jacket-cum-shirt.png",
    background: colorBlue,
    department: "Men",
    category: "Jacket",
  },
  {
    id: "13",
    name: "Black Check Shirt",
    description: "",
    price: "35",
    image:
      "../Images/shirts/black-check-f-shirt.png",
    background: colorBlue,
    department: "Men",
    category: "Shirt",
  },
  {
    id: "14",
    name: "Yahwen Black Shirt",
    description: "",
    price: "20",
    image:
      "../Images/shirts/faith-yarn-Wr0TpKqf26s-unsplash-removebg-preview.png",
    background: colorGreen,
    department: "Men",
    category: "Shirt",
  },
  {
    id: "15",
    name: "Winter Cap",
    description: "",
    price: "5.7",
    image:
      "../Images/Hat/Tuque-Beanie-Hat.png",
    background: "",
    department: "Men",
    category: "Hats",
  },
  {
    id: "16",
    name: "Round Collar Sweatshirt",
    description: "",
    price: "36",
    image:
      "../Images/Sweat Shirts/Round-Collar-Sweatshirt.png",
    background: "",
    department: "Men",
    category: "Sweatshirt",
  },
  {
    id: "17",
    name: "Summer SweatShirt",
    description: "",
    price: "40",
    image:
      "../Images/Sweat Shirts/sweatshirt-hang.png",
    background: colorBlue,
    department: "Men",
    category: "Sweatshirt",
  },
  {
    id: "18",
    name: "Apple Watch Series 5",
    description: "",
    price: "250",
    image:
      "../Images/Watches/Apple-Watch-Series.png",
    background: colorGreen,
    department: "Men",
    category: "Watches",
  },
  {
    id: "19",
    name: "Fossil",
    description: "",
    price: "115",
    image:
      "../Images/Watches/fossil watch.png",
    background: "clr-01AF67",
    department: "Men",
    category: "Watches",
  },
  {
    id: "20",
    name: "Breitling Black Watch",
    description: "",
    price: "160",
    image:
      "../Images/Watches/breitling watch.png",
    background: "",
    department: "Men",
    category: "Watches",
  },
  {
    id: "21",
    name: "Apple i watch ",
    description: "",
    price: "190",
    image:
      "../Images/Watches/Free-Apple-iWatch.png",
    background: colorBlue,
    department: "Men",
    category: "Watches",
  },
  {
    id: "22",
    name: "Tom&Jerry White T-Shirt",
    description: "",
    price: "30",
    image:
      "../Images/T-shirts/Round-Neck T-Shirt.png",
    background: colorBlue,
    department: "Men",
    category: "Tshirt",
  },
  {
    id: "23",
    name: "Summer T-Shirt",
    description: "",
    price: "45",
    image:
      "../Images/T-shirts/Round-Neck-T-Shirt.png",
    background: colorGreen,
    department: "Men",
    category: "Tshirt",
  },
  {
    id: "24",
    name: "Classic Perfume",
    description: "",
    price: "10",
    image:
      "../Images/Perfumes/Classic-Perfume.png",
    background: "",
    department: "Men",
    category: "Perfumes",
  },
  {
    id: "25",
    name: "Elegant Perfume",
    description: "",
    price: "16",
    image:
      "../Images/Perfumes/perfume.png",
    background: "",
    department: "All",
    category: "Perfumes",
  },
];

export const mainArticleContainer = document.getElementById("articles-inside");

let basket = JSON.parse(localStorage.getItem("Item Info")) || [];

export let totalItemsInCart = document.getElementById("sum-items");

export let showQuantity = (id) => {
  let first = basket.find((x) => x.id == id);
  if (first === undefined) {
    return 0;
  } else {
    return first.quantity;
  }
};

let showProduct = (id) => {
  if (mainArticleContainer.classList.length >= 2) return;
  else {
    mainArticleContainer.innerHTML = product
      .map(function (x) {
        return `<article class="product-card">
        <div class="img-large-cart-icon">
          <span class="material-symbols-outlined article-icon no-bd-black">
            fit_screen
          </span>
          <span class="material-symbols-outlined article-icon no-bd-black">
            add_shopping_cart
          </span>
        </div>
        <div class="product-details">
          <div class="rect-box ${x.background}">
            <img src="${x.image}" alt="" />
          </div>
    
          <div class="name-price">
            <h4 class="pro-name">${x.name}</h4>
            <p class="pro-price">$${x.price}</p>
          </div>
        </div>
        <div class="count-item">
        <p class="select-q">Select Quantity</p>
        <div style="user-select:none;">
              <span
                class="material-symbols-outlined decrease-item no-bd-black"
                title="Decrease quantity" onclick="window.decreaseItem(this)"
                id="${x.id}">remove</span>
              <span
                class="material-symbols-outlined increase-item no-bd-black"
                title="Increase quantity" onclick="increaseItem(this)"
                id="${x.id}">add</span>
                </div>
                <div class="item-q-wrap">
                    <p class="item-quantity" id="${
                      x.id
                    }">${showQuantity(x.id)}</p>
                </div>
            </div>
            
      </article>`;
      })
      .join(" ");
  }
};

showProduct();

let increaseItem = (id) => {
  let itemId = id.id;

  let data = product.filter(function (x) {
    return x.id === itemId;
  })[0];

  let searchItem = basket.find((currentItem) => currentItem.id === itemId);

  if (searchItem === undefined) {
    basket.push({
      id: data.id,
      name: data.name,
      price: data.price,
      quantity: 1,
    });
  } else {
    searchItem.quantity += 1;
  }

  localStorage.setItem("Item Info", JSON.stringify(basket));
  updateQuantity(id);
  updateCart();
};

let decreaseItem = (id) => {
  let searchItem = basket.find((x) => x.id === id.id);
  let findIndex = basket.indexOf(basket.find((x) => x.id === id.id));
  if (searchItem === undefined) {
    return;
  } else {
    if (searchItem.quantity <= 0) return;
    else {
      searchItem.quantity -= 1;
    }
  }

  updateQuantity(id);
  basket = basket.filter((x) => x.quantity !== 0);

  localStorage.setItem("Item Info", JSON.stringify(basket));

  updateCart();
};

export let updateQuantity = (id) => {
  const elementName = id.parentElement.nextElementSibling.children[0];
  const cartItemQty = id.parentElement.querySelector(".current-qty");
  let findItem = basket.find((x) => x.id === id.id);
  if (elementName.classList.contains("total-price")) {
    cartItemQty.innerHTML = findItem.quantity;
  } else {
    elementName.innerHTML = findItem.quantity;
  }
};

export let updateCart = () => {
  if (basket.length > 0) {
    let sumOfQuantity = basket
      .map((x) => x.quantity)
      .reduce((total, currentItem) => total + currentItem);

    totalItemsInCart.innerHTML = sumOfQuantity;
  } else if (basket[0] === undefined) {
    totalItemsInCart.innerHTML = 0;
  }
};

if (basket.length > 0) {
  updateCart();
}

// to use functions globally use window.functionName = functionName

window.increaseItem = increaseItem;
window.decreaseItem = decreaseItem;
